var Y=Object.defineProperty;var q=(m,i,_)=>i in m?Y(m,i,{enumerable:!0,configurable:!0,writable:!0,value:_}):m[i]=_;var S=(m,i,_)=>(q(m,typeof i!="symbol"?i+"":i,_),_);import{t as R,z as A,p as x,a as T,r as y,c as P,b as G,d as b,f as J,e as N,g as w}from"./index.esm.min.c6bc6a12.js";var Z={affix:{hp:"\u751F\u547D\u503C",atk:"\u653B\u51FB\u529B",def:"\u9632\u5FA1\u529B",hpp:"\u751F\u547D\u503C%",atkp:"\u653B\u51FB\u529B%",defp:"\u9632\u5FA1\u529B%",em:"\u5143\u7D20\u7CBE\u901A",er:"\u5143\u7D20\u5145\u80FD",hb:"\u6CBB\u7597\u52A0\u6210",cr:"\u66B4\u51FB\u7387",cd:"\u66B4\u51FB\u4F24\u5BB3",pyroDB:"\u706B\u5143\u7D20\u4F24\u5BB3\u52A0\u6210",hydroDB:"\u6C34\u5143\u7D20\u4F24\u5BB3\u52A0\u6210",electroDB:"\u96F7\u5143\u7D20\u4F24\u5BB3\u52A0\u6210",anemoDB:"\u98CE\u5143\u7D20\u4F24\u5BB3\u52A0\u6210",cryoDB:"\u51B0\u5143\u7D20\u4F24\u5BB3\u52A0\u6210",geoDB:"\u5CA9\u5143\u7D20\u4F24\u5BB3\u52A0\u6210",physicalDB:"\u7269\u7406\u4F24\u5BB3\u52A0\u6210"},main:{hp:"\u751F\u547D\u503C",atk:"\u653B\u51FB\u529B",hpp:"\u751F\u547D\u503C%",atkp:"\u653B\u51FB\u529B%",defp:"\u9632\u5FA1\u529B%",em:"\u5143\u7D20\u7CBE\u901A",er:"\u5143\u7D20\u5145\u80FD",hb:"\u6CBB\u7597\u52A0\u6210",cr:"\u66B4\u51FB\u7387",cd:"\u66B4\u51FB\u4F24\u5BB3",db:"\u5143\u7D20/\u7269\u7406\u4F24\u5BB3\u52A0\u6210"},minor:{hp:"\u751F\u547D\u503C",atk:"\u653B\u51FB\u529B",def:"\u9632\u5FA1\u529B",hpp:"\u751F\u547D\u503C%",atkp:"\u653B\u51FB\u529B%",defp:"\u9632\u5FA1\u529B%",em:"\u5143\u7D20\u7CBE\u901A",er:"\u5143\u7D20\u5145\u80FD",cr:"\u66B4\u51FB\u7387",cd:"\u66B4\u51FB\u4F24\u5BB3"},slot:{flower:"\u751F\u4E4B\u82B1",plume:"\u6B7B\u4E4B\u7FBD",sands:"\u65F6\u4E4B\u6C99",goblet:"\u7A7A\u4E4B\u676F",circlet:"\u7406\u4E4B\u51A0"},character:{Albedo:"\u963F\u8D1D\u591A",Aloy:"\u57C3\u6D1B\u4F0A",Amber:"\u5B89\u67CF",AratakiItto:"\u8352\u6CF7\u4E00\u6597",Barbara:"\u82AD\u82AD\u62C9",Beidou:"\u5317\u6597",Bennett:"\u73ED\u5C3C\u7279",Chongyun:"\u91CD\u4E91",Diluc:"\u8FEA\u5362\u514B",Diona:"\u8FEA\u5965\u5A1C",Eula:"\u4F18\u83C8",Fischl:"\u83F2\u8C22\u5C14",Ganyu:"\u7518\u96E8",Gorou:"\u4E94\u90CE",HuTao:"\u80E1\u6843",Jean:"\u7434",KaedeharaKazuha:"\u67AB\u539F\u4E07\u53F6",Kaeya:"\u51EF\u4E9A",KamisatoAyaka:"\u795E\u91CC\u7EEB\u534E",KamisatoAyato:"\u795E\u91CC\u7EEB\u4EBA",Keqing:"\u523B\u6674",Klee:"\u53EF\u8389",KujouSara:"\u4E5D\u6761\u88DF\u7F57",Lisa:"\u4E3D\u838E",Mona:"\u83AB\u5A1C",Ningguang:"\u51DD\u5149",Noelle:"\u8BFA\u827E\u5C14",Qiqi:"\u4E03\u4E03",RaidenShogun:"\u96F7\u7535\u5C06\u519B",Razor:"\u96F7\u6CFD",Rosaria:"\u7F57\u838E\u8389\u4E9A",SangonomiyaKokomi:"\u73CA\u745A\u5BAB\u5FC3\u6D77",Sayu:"\u65E9\u67DA",Shenhe:"\u7533\u9E64",Sucrose:"\u7802\u7CD6",Tartaglia:"\u8FBE\u8FBE\u5229\u4E9A",Thoma:"\u6258\u9A6C",Traveler:"\u65C5\u884C\u8005",TravelerAnemo:"\u98CE\u4E3B",TravelerGeo:"\u5CA9\u4E3B",TravelerElectro:"\u96F7\u4E3B",Venti:"\u6E29\u8FEA",Xiangling:"\u9999\u83F1",Xiao:"\u9B48",Xingqiu:"\u884C\u79CB",Xinyan:"\u8F9B\u7131",YaeMiko:"\u516B\u91CD\u795E\u5B50",Yanfei:"\u70DF\u7EEF",Yoimiya:"\u5BB5\u5BAB",YunJin:"\u4E91\u5807",Zhongli:"\u949F\u79BB"},element:{pyro:"\u706B\u5143\u7D20",hydro:"\u6C34\u5143\u7D20",electro:"\u96F7\u5143\u7D20",anemo:"\u98CE\u5143\u7D20",cryo:"\u51B0\u5143\u7D20",geo:"\u5CA9\u5143\u7D20"},preset:{"atkp,cd,cr":"\u653B\u53CC\u66B4","atkp,cd,cr,defp,er":"\u653B\u9632\u5145\u53CC\u66B4","atkp,cd,cr,em":"\u653B\u7CBE\u53CC\u66B4","atkp,cd,cr,em,er":"\u653B\u7CBE\u5145\u53CC\u66B4","atkp,cd,cr,em,hpp":"\u653B\u7CBE\u751F\u53CC\u66B4","atkp,cd,cr,er":"\u653B\u5145\u53CC\u66B4","atkp,cd,cr,er,hpp":"\u653B\u751F\u5145\u53CC\u66B4","atkp,em,er":"\u653B\u7CBE\u5145","atkp,em,er,hpp":"\u653B\u7CBE\u751F\u5145","atkp,er":"\u653B\u5145","cd,cr,defp":"\u9632\u53CC\u66B4","cd,cr,defp,er":"\u9632\u5145\u53CC\u66B4","defp,em,er":"\u9632\u7CBE\u5145","em,er":"\u7CBE\u5145","er,hpp":"\u751F\u5145"}},I={minorStat:{hp:{p:6,v:298.75},atk:{p:6,v:19.45},def:{p:6,v:23.15},hpp:{p:4,v:5.83},atkp:{p:4,v:5.83},defp:{p:4,v:7.29},em:{p:4,v:23.31},er:{p:4,v:6.48},cr:{p:3,v:3.89},cd:{p:3,v:7.77}},minorKeys:["hp","atk","def","hpp","atkp","defp","em","er","cr","cd"],mainKeys:{all:["hp","atk","hpp","atkp","defp","em","er","hb","cr","cd","pyroDB","hydroDB","electroDB","anemoDB","cryoDB","geoDB","physicalDB"],flower:["hp"],plume:["atk"],sands:["hpp","atkp","defp","em","er"],goblet:["hpp","atkp","defp","em","pyroDB","hydroDB","electroDB","anemoDB","cryoDB","geoDB","physicalDB"],circlet:["hpp","atkp","defp","em","hb","cr","cd"]},mainStat:{hp:[717,920,1123,1326,1530,1733,1936,2139,2342,2545,2749,2952,3155,3358,3561,3764,3967,4171,4374,4577,4780],atk:[47,60,73,86,100,113,126,139,152,166,179,192,205,219,232,245,258,272,285,298,311],hpp:[7,9,11,12.9,14.9,16.9,18.9,20.9,22.8,24.8,26.8,28.8,30.8,32.8,34.7,36.7,38.7,40.7,42.7,44.6,46.6],atkp:[7,9,11,12.9,14.9,16.9,18.9,20.9,22.8,24.8,26.8,28.8,30.8,32.8,34.7,36.7,38.7,40.7,42.7,44.6,46.6],defp:[8.7,11.2,13.7,16.2,18.6,21.1,23.6,26.1,28.6,31,33.5,36,38.5,40.9,43.4,45.9,48.4,50.8,53.3,55.8,58.3],em:[28,36,44,52,60,68,76,84,91,99,107,115,123,131,139,147,155,163,171,179,187],er:[7.8,10,12.2,14.4,16.6,18.8,21,23.2,25.4,27.6,29.8,32,34.2,36.4,38.6,40.8,43,45.2,47.4,49.6,51.8],hb:[5.4,6.9,8.4,10,11.5,13,14.5,16.1,17.6,19.1,20.6,22.1,23.7,25.2,26.7,28.2,29.8,31.3,32.8,34.3,35.9],cr:[4.7,6,7.3,8.6,9.9,11.3,12.6,13.9,15.2,16.6,17.9,19.2,20.5,21.8,23.2,24.5,25.8,27.1,28.4,29.8,31.1],cd:[9.3,12,14.6,17.3,19.9,22.5,25.2,27.8,30.5,33.1,35.7,38.4,41,43.7,46.3,49,51.6,54.2,56.9,59.5,62.2],pyroDB:[7,9,11,12.9,14.9,16.9,18.9,20.9,22.8,24.8,26.8,28.8,30.8,32.8,34.7,36.7,38.7,40.7,42.7,44.6,46.6],hydroDB:[7,9,11,12.9,14.9,16.9,18.9,20.9,22.8,24.8,26.8,28.8,30.8,32.8,34.7,36.7,38.7,40.7,42.7,44.6,46.6],electroDB:[7,9,11,12.9,14.9,16.9,18.9,20.9,22.8,24.8,26.8,28.8,30.8,32.8,34.7,36.7,38.7,40.7,42.7,44.6,46.6],anemoDB:[7,9,11,12.9,14.9,16.9,18.9,20.9,22.8,24.8,26.8,28.8,30.8,32.8,34.7,36.7,38.7,40.7,42.7,44.6,46.6],cryoDB:[7,9,11,12.9,14.9,16.9,18.9,20.9,22.8,24.8,26.8,28.8,30.8,32.8,34.7,36.7,38.7,40.7,42.7,44.6,46.6],geoDB:[7,9,11,12.9,14.9,16.9,18.9,20.9,22.8,24.8,26.8,28.8,30.8,32.8,34.7,36.7,38.7,40.7,42.7,44.6,46.6],physicalDB:[8.7,11.2,13.7,16.2,18.6,21.1,23.6,26.1,28.6,31,33.5,36,38.5,40.9,43.4,45.9,48.4,50.8,53.3,55.8,58.3]},mainDistr:{flower:{hp:1},plume:{atk:1},sands:{hpp:8/30,atkp:8/30,defp:8/30,em:3/30,er:3/30},goblet:{hpp:17/80,atkp:17/80,defp:16/80,pyroDB:4/80,hydroDB:4/80,electroDB:4/80,anemoDB:4/80,cryoDB:4/80,geoDB:4/80,physicalDB:4/80,em:2/80},circlet:{hpp:11/50,atkp:11/50,defp:11/50,cr:5/50,cd:5/50,hb:5/50,em:2/50}}};const g={hp:6/44,atk:6/44,def:6/44,hpp:4/44,atkp:4/44,defp:4/44,em:4/44,er:4/44,cr:3/44,cd:3/44},O={flower:{hp:1},plume:{atk:1},sands:{hpp:8/30,atkp:8/30,defp:8/30,em:3/30,er:3/30},goblet:{hpp:17/80,atkp:17/80,defp:16/80,pyroDB:4/80,hydroDB:4/80,electroDB:4/80,anemoDB:4/80,cryoDB:4/80,geoDB:4/80,physicalDB:4/80,em:2/80},circlet:{hpp:11/50,atkp:11/50,defp:11/50,cr:5/50,cd:5/50,hb:5/50,em:2/50}};let j,M,z;function H(){j=A([91,10]),j[0][0]=1;for(let[m,i]of T(y(1,10),y(0,91)))for(let _ of y(7,1+Math.min(10,i)))j[i][m]+=j[i-_][m-1];for(let[m,i]of T(y(1,10),y(0,91)))j[i][m]/=4**m;M=A([10,10,5]);for(let m of y(4))M[m][3][m]=1;for(let m of y(5))M[m][4][m]=1;for(let[m,i]of T(y(5,10),y(5))){M[0][m][i]=(4-i)*M[0][m-1][i];for(let _ of y(1,10))M[_][m][i]=i*M[_-1][m-1][i]+(4-i)*M[_][m-1][i]}for(let[m,i,_]of T(y(5,10),y(5),y(10)))M[_][m][i]/=4**(m-4);z=[.8,.2]}function U(m,i,_){j==null&&H();let v=A([5,2]),D={},f=[];for(let n in g)D[n]=0;for(let n of m)D[n]=1;for(let n in g)n!=i&&f.push(n);let k=i in g?1-g[i]:1;for(let[n,a,h]of x(f,3)){let u=g[n]*g[a]*g[h]/k/(k-g[n])/(k-g[n]-g[a]),o=D[n]+D[a]+D[h];v[o][0]+=u}for(let[n,a,h,u]of x(f,4)){let o=g[n]*g[a]*g[h]*g[u]/k/(k-g[n])/(k-g[n]-g[a])/(k-g[n]-g[a]-g[h]),l=D[n]+D[a]+D[h]+D[u];v[l][1]+=o}let s=Math.floor(_/4),B=41+s*10,c=A(B);for(let[n,a,h,u]of T(y(2),y(5),y(10),y(B))){let o=3+s+n;s||n?c[u]+=j[u][h]*M[h][o][a]*v[a][1]*z[n]:c[u]+=j[u][h]*M[h][o][a]*v[a][0]*z[n]}k=0;for(let n of y(B))k+=c[n],c[n]=k;return c}function W(m,i){let _=1,v=0,D=1,f=[0,0,0,0,0],k=Object.values(m);if(k.length!=5)throw new Error("pGetAllMains: There should be 5 slots");for(let s=0;s<32;++s){v+=_*D**i;let B=0;if(_==-1){for(let c=0;c<5;++c)if(f[c]==1){B=c+1;break}}if(B==5)break;D+=(2*f[B]-1)*k[B],f[B]=1-f[B],_*=-1}return v}function $(m){let i=1,_=0,v=[0,0,0,0,0],D=Object.values(m);if(D.length!=5)throw new Error("pGetAllMains: There should be 5 slots");for(let f=1,k=0;f<32;++f){let s=0;if(i==-1){for(let B=0;B<5;++B)if(v[B]==1){s=B+1;break}}k+=(1-2*v[s])*D[s],_+=i/k,v[s]=1-v[s],i*=-1}return _}function ee(m,i,_){let v=A(91),D={},f={},k=[];for(let r in g)r!=m&&k.push(r);let s=m in g?1-g[m]:1;for(let r of x(k,4)){let e=1,t=s;for(let F of r)e*=g[F]/t,t-=g[F];let d=[];for(let F of r)d.push(i[F]);d.sort();let p=d.join(",");_(r.slice(0,3),r)?p in D?D[p]+=.8*e:D[p]=.8*e:v[0]+=.8*e,_(r,r)?p in f?f[p]+=.2*e:f[p]=.2*e:v[0]+=.2*e}let B={},c={},n,a,h,u;function o(r,e){if(r in B)return B[r];let t=A(41);for(let d=7;d<=10;++d){n=e[0]*d;for(let p=7;p<=10;++p){a=n+e[1]*p;for(let F=7;F<=10;++F){h=a+e[2]*F;for(let E=7;E<=10;++E)u=h+e[3]*E,t[Math.round(u)]+=1}}}for(;t[t.length-1]==0;)t.pop();for(let d=0;d<t.length;++d)t[d]/=256;return B[r]=t}function l(r,e){if(r in c)return c[r];let t=A(21);for(let d=0;d<4;++d)for(let p=0;p<4;++p)for(let F=7;F<=10;++F){n=e[d]*F;for(let E=7;E<=10;++E)a=n+e[p]*E,t[Math.round(a)]+=1}for(;t[t.length-1]==0;)t.pop();for(let d=0;d<t.length;++d)t[d]/=256;return c[r]=t}for(let r in D){let e=r.split(",").map(F=>parseFloat(F)),t=o(r,e),d=l(r,e),p=P(t,d,d);v=G([v,p],[1,D[r]])}for(let r in f){let e=r.split(",").map(E=>parseFloat(E)),t=o(r,e),d=l(r,e),p=A(11);for(let E=0;E<4;++E)for(let K=7;K<=10;++K)n=e[E]*K,p[Math.round(n)]+=1;for(;p[p.length-1]==0;)p.pop();for(let E=0;E<p.length;++E)p[E]/=16;let F=P(t,d,d,p);v=G([v,F],[1,f[r]])}return R(v)}function ue(m,i,_,v,D){let f=["flower","plume","sands","goblet","circlet"],k=[];for(let B of I.minorKeys)k.push(g[B]);let s=[A(451),A(91),A(91),A(91),A(91),A(91)];for(let B=0;B<v;++B){let c={};for(let a of f)c[a]=0;for(let a=0;a<_;++a){let h=f[b(5)],u=m[h];if(u=="db"&&(u="pyroDB"),Math.random()>I.mainDistr[h][u])continue;let o=b(I.minorKeys,k,5).filter(t=>t!=u).slice(0,4),l=Math.random()<.8?3:4;if(!D(h,o.slice(0,l),o.slice(l,4)))continue;let r=A(4),e=0;for(let t=0;t<4;++t)r[t]=7+b(4);for(let t=0;t<l+1;++t)r[b(4)]+=7+b(4);for(let t=0;t<4;++t)e+=r[t]*i[o[t]];e=Math.min(Math.round(e),90),c[h]=Math.max(c[h],e)}let n=0;for(let a=0;a<5;++a)s[a+1][c[f[a]]]++,n+=c[f[a]];s[0][n]++}for(let B of s)for(let c=0;c<B.length;++c)B[c]/=v;return s}class X{constructor({slot:i,main:_,init_3:v,minor_keys:D,minor_values:f,lv:k=0}){S(this,"slot");S(this,"main");S(this,"init_3");S(this,"minor_keys");S(this,"minor_values",[0,0,0,0]);S(this,"lv",0);if(i?this.slot=i:this.slot=b(["flower","plume","sands","goblet","circlet"]),_)this.main=_;else{let s=[],B=[];for(let c in O[this.slot])s.push(c),B.push(O[this.slot][c]);this.main=b(s,B)}if(v!=null?this.init_3=v:this.init_3=Math.random()<.8,D)this.minor_keys=D;else{let s=this.main in g?1-g[this.main]:1,B=[],c=[];for(let n in g)n!=this.main&&(B.push(n),c.push(g[n]/s));this.minor_keys=b(B,c,4)}if(f)this.minor_values=f;else{this.minor_values=[0,0,0,0];let s=this.init_3?3:4;for(let B=0;B<s;++B)this.minor_values[B]=7+b(4)}this.lv=0;for(let s=0;s<k;++s)this.level_up()}level_up(){if(this.init_3&&this.lv==0)this.minor_values[3]=7+b(4);else{let i=b(4),_=7+b(4);this.minor_values[i]+=_}this.lv++}level_up_to_full(){for(let i=0;i<5-this.lv;++i)this.level_up()}get_score(i){let _=0;for(let v=0;v<4;++v)_+=i[this.minor_keys[v]]*this.minor_values[v];return _}}const C={d4:{},d2:{},d1:{},weight:void 0,mains:void 0,accept:void 0,single_results:{}};function L(m,i,_,v=!1,D={sim_rounds:1e5}){let f={pdf:[0],minor_avg:{hp:[0],atk:[0],def:[0],hpp:[0],atkp:[0],defp:[0],em:[0],er:[0],cr:[0],cd:[0]},p_level_up:0};if(v){let u=D.sim_rounds;for(let o=0;o<u;++o){let l=new X({main:m});if(l.init_3,_(l.minor_keys.slice(0,3),l.minor_keys)){f.p_level_up+=1,l.level_up_to_full();let r=Math.round(l.get_score(i));for(;r>=f.pdf.length;)f.pdf.push(0);f.pdf[r]+=1;for(let e=0;e<4;++e){let t=l.minor_keys[e],d=l.minor_values[e];for(;r>=f.minor_avg[t].length;)f.minor_avg[t].push(0);f.minor_avg[t][r]+=d}}else f.pdf[0]+=1}for(let o=0;o<f.pdf.length;++o)if(f.pdf[o]>0){for(let l in f.minor_avg)o<f.minor_avg[l].length&&(f.minor_avg[l][o]/=f.pdf[o]);f.pdf[o]/=u}return f.p_level_up/=u,f}let k=[];for(let u in g)u!=m&&k.push(u);let s=m in g?1-g[m]:1,B={},c={};for(let u of x(k,4)){let o=1,l=s;for(let t of u)o*=g[t]/l,l-=g[t];let r=[...u];r.sort();let e=r.join(",");_(u.slice(0,3),u)?(f.p_level_up+=.8*o,e in B?B[e]+=.8*o:B[e]=.8*o):f.pdf[0]+=.8*o,_(u,u)?(f.p_level_up+=.2*o,e in c?c[e]+=.2*o:c[e]=.2*o):f.pdf[0]+=.2*o}i!=C.weight&&(C.weight=i,C.d4={},C.d2={},C.d1={});function n(u,o){if(o in C.d4)return C.d4[o];let l={pdf:A(41),minor_avg:{}};for(let p of u)l.minor_avg[p]=A(41);let r,e,t,d;for(let p=7;p<=10;++p){r=i[u[0]]*p;for(let F=7;F<=10;++F){e=r+i[u[1]]*F;for(let E=7;E<=10;++E){t=e+i[u[2]]*E;for(let K=7;K<=10;++K)d=Math.round(t+i[u[3]]*E),l.pdf[d]++,l.minor_avg[u[0]][d]+=p,l.minor_avg[u[1]][d]+=F,l.minor_avg[u[2]][d]+=E,l.minor_avg[u[3]][d]+=K}}}for(let p=0;p<=40;++p)if(l.pdf[p]>0){for(let F of u)l.minor_avg[F][p]/=l.pdf[p];l.pdf[p]/=256}w(l.pdf);for(let p of u)w(l.minor_avg[p]);return C.d4[o]=l,l}function a(u,o){if(o in C.d2)return C.d2[o];let l={pdf:A(21),minor_avg:{}};for(let t of u)l.minor_avg[t]=A(21);let r,e;for(let t=0;t<4;++t)for(let d=0;d<4;++d)for(let p=7;p<=10;++p){r=i[u[t]]*p;for(let F=7;F<=10;++F)e=Math.round(r+i[u[d]]*F),l.pdf[e]++,l.minor_avg[u[t]][e]+=p,l.minor_avg[u[d]][e]+=F}for(let t=0;t<=20;++t)if(l.pdf[t]>0){for(let d of u)l.minor_avg[d][t]/=l.pdf[t];l.pdf[t]/=256}w(l.pdf);for(let t of u)w(l.minor_avg[t]);return C.d2[o]=l,l}function h(u,o){if(o in C.d1)return C.d1[o];let l={pdf:A(11),minor_avg:{}};for(let e of u)l.minor_avg[e]=A(11);let r;for(let e=0;e<4;++e)for(let t=7;t<=10;++t)r=Math.round(i[u[e]]*t),l.pdf[r]++,l.minor_avg[u[e]][r]+=t;for(let e=0;e<=10;++e)if(l.pdf[e]>0){for(let t of u)l.minor_avg[t][e]/=l.pdf[e];l.pdf[e]/=16}w(l.pdf);for(let e of u)w(l.minor_avg[e]);return C.d1[o]=l,l}for(let u in B){let o=u.split(","),l=B[u],r=n(o,u),e=a(o,u),t=P(r.pdf,e.pdf,e.pdf);f.pdf=G([f.pdf,t],[1,l]);for(let d of o){let p=N([r.pdf,e.pdf,e.pdf],[r.minor_avg[d],e.minor_avg[d],e.minor_avg[d]]);f.minor_avg[d]=G([f.minor_avg[d],p],[1,l])}}for(let u in c){let o=u.split(","),l=c[u],r=n(o,u),e=a(o,u),t=h(o,u),d=P(r.pdf,e.pdf,e.pdf,t.pdf);f.pdf=G([f.pdf,d],[1,l]);for(let p of o){let F=N([r.pdf,e.pdf,e.pdf,t.pdf],[r.minor_avg[p],e.minor_avg[p],e.minor_avg[p],t.minor_avg[p]]);f.minor_avg[p]=G([f.minor_avg[p],F],[1,l])}}for(let u=0;u<f.pdf.length;++u)if(f.pdf[u]>0)for(let o in g)u<f.minor_avg[o].length&&(f.minor_avg[o][u]/=f.pdf[u]);return f}function te(m,i,_,v,D={},f=!1,k={sim_rounds:1e5}){let s={pdf:[0],minor_avg:{hp:[0],atk:[0],def:[0],hpp:[0],atkp:[0],defp:[0],em:[0],er:[0],cr:[0],cd:[0]},p_level_up:0};if(f){let n=k.sim_rounds;for(let a=0;a<n;++a){let h={};for(let r in m)if(r in D){let e=D[r];h[r]={score:e.get_score(i),artifact:e}}else h[r]={score:0,artifact:void 0};let u=0;for(let r=0;r<v;++r){let e=new X({});if(e.main!=m[e.slot])continue;let t=e.init_3?3:4;if(!_(e.slot,e.minor_keys.slice(0,t),e.minor_keys))continue;u++,e.level_up_to_full();let d=e.get_score(i);d>h[e.slot].score&&(h[e.slot].score=d,h[e.slot].artifact=e)}let o=0;for(let r in h)o+=h[r].score;for(o=Math.round(o);o>=s.pdf.length;)s.pdf.push(0);s.pdf[o]++;let l={hp:0,atk:0,def:0,hpp:0,atkp:0,defp:0,em:0,er:0,cr:0,cd:0};for(let r in h){let e=h[r].artifact;if(!!e)for(let t=0;t<4;++t){let d=e.minor_keys[t],p=e.minor_values[t];l[d]+=p}}for(let r in l){for(;o>=s.minor_avg[r].length;)s.minor_avg[r].push(0);s.minor_avg[r][o]+=l[r]}s.p_level_up+=u/v}for(let a=0;a<s.pdf.length;++a)if(s.pdf[a]>0){for(let h in s.minor_avg)a<s.minor_avg[h].length&&(s.minor_avg[h][a]/=s.pdf[a]);s.pdf[a]/=n}return s.p_level_up/=n,s}(i!=C.weight||m!=C||_!=C.accept)&&(C.weight=i,C.mains=m,C.accept=_,C.d4={},C.d2={},C.d1={},C.single_results={});let B={};for(let n in m){let a;if(n in C.single_results?a=C.single_results[n]:(a=L(m[n],i,(o,l)=>_(n,o,l)),C.single_results[n]=a),n in D){let o=D[n],l=Math.round(o.get_score(i)),r=0;for(let e=0;e<=l;++e)r+=a.pdf[e],a.pdf[e]=0;a.pdf[l]=r}let h=O[n][m[n]]/5,u=R(a.pdf);u=u.map(o=>(h*o+1-h)**v),B[n]={pdf:J(u),minor_avg:a.minor_avg},s.p_level_up+=a.p_level_up*h}let c=[];for(let n in B)c.push(B[n].pdf);s.pdf=P(...c);for(let n in g){let a=[];for(let u in B)a.push(B[u].minor_avg[n]);let h=N(c,a);for(let u=0;u<h.length;++u)s.pdf[u]>0&&(h[u]/=s.pdf[u]);s.minor_avg[n]=h}return s}export{U as a,I as b,Z as c,te as d,$ as e,W as p,ue as s,ee as u};
